<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>MultiShop - Online Shop Website Template</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Free HTML Templates" name="keywords">
    <meta content="Free HTML Templates" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="/lib/animate/animate.min.css" rel="stylesheet">
    <link href="/lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="/css/style.min.css" rel="stylesheet">
    <link href="/css/custom.css" rel="stylesheet">
</head>

<body>

<!-- ===== HEADER START ===== -->
<header class="bg-white shadow-sm position-relative">

  <!-- Top Header -->
  <div class="fixed-top bg-light">
    <div class="container py-3">

      <!-- Top Row -->
      <div class="row align-items-center">

        <!-- Logo -->
        <div class="col-6 col-lg-3">
          <a href="/" class="text-decoration-none fs-3 fw-bold text-dark">
            <span class="text-primary">Multi</span>Shop
          </a>
        </div>

        <!-- Desktop Search -->
        <div class="col-lg-6 d-none d-lg-block">
          <form action="/search">
            <div class="input-group">
              <input type="text"
                     class="form-control rounded-start-pill"
                     name="search"
                     value="<%= typeof search !== 'undefined' ? search : '' %>"
                     placeholder="Search for products...">
              <button class="btn btn-primary rounded-end-pill">
                <i class="fa fa-search"></i>
              </button>
            </div>
          </form>
        </div>

        <!-- Account + Cart -->
        <div class="col-6 col-lg-3 d-flex justify-content-end align-items-center">

          <% if(user) { %>
            <div class="dropdown me-2">
              <button class="btn btn-outline-dark dropdown-toggle" data-bs-toggle="dropdown">
                <i class="fa fa-user"></i>
              </button>
              <ul class="dropdown-menu dropdown-menu-end">
                <li><a class="dropdown-item" href="/profile">Profile</a></li>
                <li><a class="dropdown-item" href="/orders">Orders</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item text-danger" href="/logout">Logout</a></li>
              </ul>
            </div>
          <% } else { %>

            <!-- Desktop Login / Signup -->
            <a href="/login" class="btn btn-outline-dark me-2 d-none d-lg-inline">Login</a>
            <a href="/user-register" class="btn btn-primary me-2 d-none d-lg-inline">Sign Up</a>

            <!-- Mobile Login Icon -->
            <a href="/login" class="btn btn-outline-dark me-2 d-lg-none">
              <i class="fa fa-user"></i>
            </a>

          <% } %>

          <!-- Cart -->
          <a href="/cart" class="btn btn-outline-dark position-relative">
            <i class="fas fa-shopping-cart"></i>
            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" id="cartCount">
              <%= cartcount %>
            </span>
          </a>

        </div>
      </div>

      <!-- Mobile Search (Always Visible) -->
      <div class="d-lg-none mt-3">
        <form action="/search">
          <div class="input-group">
            <input type="text"
                   class="form-control rounded-start-pill"
                   name="search"
                   placeholder="Search products...">
            <button class="btn btn-primary rounded-end-pill">
              <i class="fa fa-search"></i>
            </button>
          </div>
        </form>
      </div>

    </div>
  </div>

  <!-- Navbar (Desktop Only) -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark d-none d-lg-block">
    <div class="container">

      <div class="collapse navbar-collapse show">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">

          <li class="nav-item">
            <a class="nav-link <%= route=='/'?'active':'' %>" href="/">Home</a>
          </li>

          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle <%= route.includes('/category')?'active':'' %>"
               href="#"
               data-bs-toggle="dropdown">
              Categories
            </a>
            <ul class="dropdown-menu">
              <% if(categories){ categories.forEach(category => { %>
                <li>
                  <a class="dropdown-item" href="/category/<%= category._id %>">
                    <%= category.category_name %>
                  </a>
                </li>
              <% }) } %>
            </ul>
          </li>

          <% if(user){ %>
            <li class="nav-item">
              <a class="nav-link <%= route=='/orders'?'active':'' %>" href="/orders">Orders</a>
            </li>
          <% } %>

        </ul>
      </div>

    </div>
  </nav>

</header>
<!-- ===== HEADER END ===== -->
